<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wim Hof: Halo HUD v5 - Smooth Flow</title>
    <style>
        /* --- Palette & Design --- */
        :root {
            --bg-radial: radial-gradient(circle at center, #0F3D3E 0%, #020c12 100%);
            
            --text-white: #E0FBFC;
            --text-cyan: #00F2FF;
            --text-muted: #2d4650; 
            
            /* --- HALO COLORS --- */
            --halo-gold-border: #FFD700;
            --halo-gold-glow: rgba(255, 215, 0, 0.6);

            --halo-grey-border: #546e7a;
            --halo-grey-glow: rgba(84, 110, 122, 0.4);
            
            --halo-red-border: #d32f2f;
            --halo-red-glow: rgba(211, 47, 47, 0.8);

            --halo-blue-border: #00F2FF;
            --halo-blue-glow: rgba(0, 242, 255, 0.7);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        body {
            background: var(--bg-radial);
            color: var(--text-white);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* --- UI Elements --- */
        h1 {
            font-weight: 300;
            letter-spacing: 3px;
            text-transform: uppercase;
            background: linear-gradient(to right, #00F2FF, #ffffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
            text-shadow: 0 0 20px rgba(0, 242, 255, 0.3);
        }

        .subtitle {
            color: #537985;
            font-size: 0.9rem;
            margin-bottom: 20px;
            letter-spacing: 1px;
        }

        /* Settings Panel */
        .glass-panel {
            background: rgba(8, 18, 28, 0.75);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 420px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            transition: opacity 0.4s ease;
            position: relative;
            z-index: 10;
            max-height: 85vh;
            overflow-y: auto;
        }

        .phase-desc {
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: left;
            border-left: 3px solid var(--text-cyan);
        }
        .phase-desc h3 { font-size: 0.85rem; color: var(--text-cyan); margin-bottom: 5px; text-transform: uppercase; }
        .phase-desc p { font-size: 0.75rem; color: #ccc; line-height: 1.4; margin-bottom: 8px; }

        .input-row { display: flex; gap: 15px; margin-bottom: 15px; }
        .input-group { flex: 1; text-align: left; margin-bottom: 15px; }

        label { display: block; font-size: 0.75rem; color: var(--text-cyan); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 1px; }
        input { width: 100%; padding: 12px; background: rgba(0,0,0,0.3); border: 1px solid #1C3E4F; border-radius: 8px; color: white; font-size: 1rem; outline: none; transition: 0.3s; }
        input:focus { border-color: var(--text-cyan); }

        .btn {
            background: linear-gradient(135deg, #00C6FF, #0072FF);
            color: white; border: none; padding: 15px; width: 100%; border-radius: 50px;
            font-size: 1rem; font-weight: 600; letter-spacing: 1px; cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 114, 255, 0.3); transition: transform 0.2s;
        }
        .btn:hover { transform: translateY(-2px); }

        .footer-credit { position: fixed; bottom: 15px; width: 100%; text-align: center; color: #445566; font-size: 0.75rem; pointer-events: none; z-index: 5; }

        /* --- Visualizer View --- */
        .visualizer {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100vh; 
            position: relative;
        }

        /* --- THE HALO SYSTEM --- */
        .halo-wrapper {
            position: relative;
            width: 300px; 
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-top: 50px; 
        }

        /* TOP LABEL CONTAINER */
        .top-label {
            position: absolute;
            /* MOVED DOWN: Was -190px, now -135px to get closer to halo */
            top: -135px; 
            width: 340px; 
            display: flex;
            justify-content: center;
            gap: 40px; /* Increased gap slightly for balance */
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 5; /* Ensure it stays above halo if they overlap */
        }
        .top-label.active { opacity: 1; }

        /* Individual Breath Words (Inhale/Exhale) */
        .breath-word {
            font-size: 1.5rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 4px;
            
            /* Start very dim/transparent */
            color: var(--text-white);
            opacity: 0.2; 
            text-shadow: none;
            transform: scale(0.9);
            
            /* Slower transition for "Liquid" feel (switched from 1.0s to 1.2s ease-in-out) */
            transition: opacity 1.2s ease-in-out, 
                        color 1.2s ease-in-out, 
                        text-shadow 1.2s ease-in-out,
                        transform 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* Active State: Glows White/Cyan and Scales up */
        /* Note: Removed gradient background-clip because it causes "snapping" */
        .breath-word.highlight {
            color: #ffffff;
            opacity: 1;
            text-shadow: 0 0 15px rgba(0, 242, 255, 0.8), 0 0 30px rgba(0, 242, 255, 0.4);
            transform: scale(1.15); /* Gentle swell */
        }

        /* Simple Label Mode (For HOLD / RECOVERY phases) */
        .simple-label {
            width: 100%;
            text-align: center;
            font-size: 1.6rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: var(--text-cyan);
            text-shadow: 0 0 25px rgba(0, 242, 255, 0.4);
        }

        /* RING */
        .halo-ring {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: transparent;
            border: 25px solid var(--halo-gold-border);
            box-shadow: 0 0 40px var(--halo-gold-glow), inset 0 0 40px var(--halo-gold-glow);
            transform: scale(1);
            position: absolute; 
            z-index: 1;
            transition: border-color 0.5s ease, box-shadow 0.5s ease, transform 0.5s ease-out;
            will-change: transform, border-color, box-shadow;
        }

        /* RED OVERLAY */
        .halo-ring::after {
            content: '';
            position: absolute;
            top: -25px; left: -25px; right: -25px; bottom: -25px; 
            border-radius: 50%;
            border: 25px solid var(--halo-red-border);
            box-shadow: 0 0 50px var(--halo-red-glow), inset 0 0 50px var(--halo-red-glow);
            opacity: 0; 
            z-index: 2;
            pointer-events: none;
            mix-blend-mode: lighten;
        }

        /* --- CENTER HUD TEXT --- */
        .center-hud {
            position: absolute;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            text-align: center;
            width: 180px; 
        }

        .hud-main {
            font-size: 2.2rem; 
            font-weight: 700;
            color: var(--text-white);
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
            line-height: 1.2;
            margin-bottom: 0;
        }

        .hud-sub {
            font-size: 0.9rem;
            color: var(--text-cyan);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            text-shadow: 0 1px 5px rgba(0,0,0,0.8);
            height: 1.2em;
        }

        /* --- Controls --- */
        .controls {
            margin-top: 100px; 
            display: flex;
            gap: 15px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
            z-index: 20;
        }
        .controls.active { opacity: 1; pointer-events: all; }

        .btn-sm {
            padding: 10px 25px;
            border-radius: 20px;
            border: 1px solid #537985;
            background: rgba(0,0,0,0.5);
            color: var(--text-white);
            cursor: pointer;
            transition: 0.2s;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 1px;
        }
        .btn-sm:hover { background: #537985; color: #000; }
        .btn-red { border-color: #ff5555; color: #ff5555; }
        .btn-red:hover { background: #ff5555; color: white; }

        /* Extend Button */
        .btn-extend {
            position: absolute;
            right: -20px; 
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #777;
            color: #ccc;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0; 
            pointer-events: none;
            transition: all 0.2s;
            z-index: 15;
        }
        .btn-extend:hover { background: #aaa; color: #000; border-color: #aaa; }
        .btn-extend.visible { opacity: 1; pointer-events: all; }

        /* Utility */
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.8s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Animations */
        @keyframes heartbeat {
            0% { transform: scale(0.85); box-shadow: 0 0 20px var(--halo-grey-glow), inset 0 0 20px var(--halo-grey-glow); }
            50% { transform: scale(0.88); box-shadow: 0 0 35px var(--halo-grey-glow), inset 0 0 35px var(--halo-grey-glow); }
            100% { transform: scale(0.85); box-shadow: 0 0 20px var(--halo-grey-glow), inset 0 0 20px var(--halo-grey-glow); }
        }

        /* Recovery Heartbeat (Blue) - EXPANDED SIZE */
        @keyframes heartbeatBlueExpanded {
            /* Pulse around scale 2.2 (Full Size) */
            0% { transform: scale(2.2); box-shadow: 0 0 40px var(--halo-blue-glow), inset 0 0 40px var(--halo-blue-glow); }
            50% { transform: scale(2.25); box-shadow: 0 0 70px var(--halo-blue-glow), inset 0 0 60px var(--halo-blue-glow); }
            100% { transform: scale(2.2); box-shadow: 0 0 40px var(--halo-blue-glow), inset 0 0 40px var(--halo-blue-glow); }
        }

        #dynamicStyles { display: none; }
    </style>
</head>
<body>

    <style id="dynamicStyles"></style>

    <div class="glass-panel text-center" id="settingsPanel">
        <div style="text-align: center;">
            <h1>Halo Flow</h1>
            <p class="subtitle">Wim Hof Method</p>
        </div>

        <div class="phase-desc">
            <h3>1. Deep Breathing</h3>
            <p>Halo expands (Inhale) & contracts (Exhale).</p>
            <h3>2. Retention</h3>
            <p>Halo turns grey. Hold until urge to breathe.</p>
            <h3>3. Recovery</h3>
            <p>Halo turns blue. Inhale and hold for 15s.</p>
        </div>

        <div class="input-group">
            <label>Number of Breaths</label>
            <input type="number" id="nbBreaths" value="30">
        </div>
        <div class="input-row">
            <div class="input-group">
                <label>Inhale (sec)</label>
                <input type="number" id="tInhale" value="1.8" step="0.1">
            </div>
            <div class="input-group">
                <label>Exhale (sec)</label>
                <input type="number" id="tExhale" value="1.8" step="0.1">
            </div>
        </div>
        <div class="input-row">
            <div class="input-group">
                <label>Retention (sec)</label>
                <input type="number" id="tHold" value="60">
            </div>
            <div class="input-group">
                <label>Recovery (sec)</label>
                <input type="number" id="tRecover" value="15">
            </div>
        </div>

        <button class="btn" onclick="toVisualizer()">Go to Session</button>
        
        <div style="margin-top:20px; text-align:left; border-top:1px solid rgba(255,255,255,0.1); padding-top:10px;">
            <label style="color:#666;">Previous Holds:</label>
            <div id="historyLog" style="color:#aaa; font-size:0.85rem; max-height:80px; overflow-y:auto;"></div>
        </div>
    </div>

    <div class="footer-credit">Designed by Astor Knudsen</div>

    <div class="visualizer" id="visualizerPanel">
        <div class="halo-wrapper" id="haloWrapper" onclick="handleTap()">
            
            <div id="topLabel" class="top-label">
            </div>

            <div class="halo-ring" id="haloRing"></div>
            
            <div class="center-hud">
                <div class="hud-main" id="txtMain">START</div>
                <div class="hud-sub" id="txtSub">Tap Ring</div>
            </div>

            <button class="btn-extend" id="btnExtend" onclick="extendTimer(event)">+15</button>
        </div>

        <div class="controls" id="controls">
            <button class="btn-sm btn-red" onclick="endSession()">End</button>
            <button class="btn-sm" onclick="skipStep()">Skip</button>
        </div>
    </div>

    <script>
        const PHASE_IDLE = 'idle';
        const PHASE_BREATHING = 'breathing';
        const PHASE_RETENTION = 'retention';
        const PHASE_RECOVERY = 'recovery';

        let config = {};
        let state = {
            phase: PHASE_IDLE,
            breathCount: 0,
            timerVal: 0,
            interval: null,
            textTimeout: null,
            history: []
        };

        const els = {
            settings: document.getElementById('settingsPanel'),
            visualizer: document.getElementById('visualizerPanel'),
            halo: document.getElementById('haloRing'),
            txtMain: document.getElementById('txtMain'),
            txtSub: document.getElementById('txtSub'),
            topLabel: document.getElementById('topLabel'),
            controls: document.getElementById('controls'),
            btnExtend: document.getElementById('btnExtend'),
            styleSheet: document.getElementById('dynamicStyles'),
            historyLog: document.getElementById('historyLog')
        };

        // --- Navigation ---
        function toVisualizer() {
            config.breaths = parseInt(document.getElementById('nbBreaths').value);
            config.inhale = parseFloat(document.getElementById('tInhale').value);
            config.exhale = parseFloat(document.getElementById('tExhale').value);
            config.hold = parseInt(document.getElementById('tHold').value);
            config.recover = parseInt(document.getElementById('tRecover').value);

            generateKeyframes(config.inhale, config.exhale);
            els.settings.classList.add('hidden');
            els.visualizer.style.display = 'flex';
            els.visualizer.classList.add('fade-in');
            resetToIdle();
        }

        function endSession() {
            stopAllLogic();
            els.visualizer.style.display = 'none';
            els.settings.classList.remove('hidden');
            renderHistory();
        }

        function handleTap() {
            if (state.phase === PHASE_IDLE) startBreathingPhase();
        }

        // --- Animations ---
        function generateKeyframes(inhale, exhale) {
            const total = inhale + exhale;
            const inhalePercent = (inhale / total) * 100;
            const css = `
                @keyframes breatheCycle {
                    0% { transform: scale(1); box-shadow: 0 0 40px var(--halo-gold-glow), inset 0 0 40px var(--halo-gold-glow); }
                    ${inhalePercent}% { transform: scale(2.2); box-shadow: 0 0 70px var(--halo-gold-glow), inset 0 0 50px var(--halo-gold-glow); }
                    100% { transform: scale(1); box-shadow: 0 0 40px var(--halo-gold-glow), inset 0 0 40px var(--halo-gold-glow); }
                }
            `;
            els.styleSheet.innerText = css;
        }

        function setRedOverlay(opacity, durationStr) {
            const transitionCSS = `
                .halo-ring::after {
                    transition: opacity ${durationStr} ease-in-out;
                    opacity: ${opacity};
                }
            `;
            els.styleSheet.innerText += transitionCSS;
        }

        // --- Phase 1: Breathing ---
        function startBreathingPhase() {
            state.phase = PHASE_BREATHING;
            state.breathCount = 1;

            els.controls.classList.add('active');
            els.btnExtend.classList.remove('visible');
            
            // Setup Text HTML for side-by-side labels
            els.topLabel.innerHTML = `
                <span id="lblInhale" class="breath-word">INHALE</span>
                <span id="lblExhale" class="breath-word">EXHALE</span>
            `;
            els.topLabel.classList.add('active');
            
            els.txtSub.innerText = "";
            els.txtMain.innerText = `1 / ${config.breaths}`;

            // Reset Halo
            els.halo.style.transition = "none"; 
            els.halo.style.borderColor = "var(--halo-gold-border)";
            els.halo.style.boxShadow = "0 0 40px var(--halo-gold-glow), inset 0 0 40px var(--halo-gold-glow)";
            setRedOverlay(0, "0s"); 

            const totalDuration = config.inhale + config.exhale;
            els.halo.style.animation = `breatheCycle ${totalDuration}s ease-in-out infinite`;
            els.halo.addEventListener('animationiteration', handleBreathIteration);

            breathTextCycle();
        }

        function breathTextCycle() {
            if (state.phase !== PHASE_BREATHING) return;
            
            const i = document.getElementById('lblInhale');
            const e = document.getElementById('lblExhale');

            // Start Inhale: Highlight Left, Dim Right
            if(i) i.classList.add('highlight');
            if(e) e.classList.remove('highlight');
            
            if(state.textTimeout) clearTimeout(state.textTimeout);
            
            // Wait for inhale duration, then switch
            state.textTimeout = setTimeout(() => {
                if (state.phase === PHASE_BREATHING) {
                    // Start Exhale: Dim Left, Highlight Right
                    if(i) i.classList.remove('highlight');
                    if(e) e.classList.add('highlight');
                }
            }, config.inhale * 1000);
        }

        function handleBreathIteration() {
            if (state.phase !== PHASE_BREATHING) return;
            
            if (state.breathCount < config.breaths) {
                state.breathCount++;
                els.txtMain.innerText = `${state.breathCount} / ${config.breaths}`;
                breathTextCycle();
            } else {
                els.halo.removeEventListener('animationiteration', handleBreathIteration);
                startRetentionPhase();
            }
        }

        // --- Phase 2: Retention ---
        function startRetentionPhase() {
            state.phase = PHASE_RETENTION;
            state.timerVal = config.hold;

            // Stop Breathing logic
            els.halo.style.animation = 'none';
            if(state.textTimeout) clearTimeout(state.textTimeout);
            void els.halo.offsetWidth; 

            // Update Text: Switch to single label
            els.topLabel.innerHTML = '<div class="simple-label">HOLD</div>';
            els.topLabel.classList.add('active');
            els.txtSub.innerText = ""; 

            // Deflate to Grey
            els.halo.style.transition = "transform 2.0s cubic-bezier(0.25, 1, 0.5, 1), border-color 1s ease, box-shadow 1s ease";
            
            requestAnimationFrame(() => {
                els.halo.style.transform = "scale(0.85)";
                els.halo.style.borderColor = "var(--halo-grey-border)";
                els.halo.style.boxShadow = "0 0 20px var(--halo-grey-glow), inset 0 0 20px var(--halo-grey-glow)";
            });

            // Heartbeat (Grey)
            setTimeout(() => {
                if (state.phase === PHASE_RETENTION) {
                    els.halo.style.animation = "heartbeat 1.5s ease-in-out infinite";
                }
            }, 2000); 

            // Red Overlay
            setTimeout(() => {
                if(state.phase === PHASE_RETENTION) {
                    setRedOverlay(1, `${state.timerVal}s`); 
                }
            }, 100);

            els.txtMain.innerText = formatTime(state.timerVal);
            els.btnExtend.classList.add('visible');

            state.interval = setInterval(() => {
                els.txtMain.innerText = formatTime(state.timerVal);
                state.timerVal--;
                if (state.timerVal < 0) {
                    clearInterval(state.interval);
                    startRecoveryPhase();
                }
            }, 1000);
        }

        function extendTimer(e) {
            e.stopPropagation();
            state.timerVal += 15;
            els.txtMain.innerText = formatTime(state.timerVal); 
            
            const btn = els.btnExtend;
            btn.style.transform = "translateY(-50%) scale(1.2)";
            setTimeout(() => btn.style.transform = "translateY(-50%) scale(1)", 200);
        }

        // --- Phase 3: Recovery ---
        function startRecoveryPhase() {
            logHistory(config.hold + (state.timerVal < 0 ? 0 : 0)); 
            state.phase = PHASE_RECOVERY;
            stopAllLogic();

            els.btnExtend.classList.remove('visible');
            setRedOverlay(0, "0.1s");
            els.halo.style.animation = 'none'; 
            
            // Expand to FULL SIZE (2.2) & Turn Blue
            setTimeout(() => {
                els.halo.style.transition = "transform 1.5s cubic-bezier(0.25, 1, 0.5, 1), border-color 0.5s ease, box-shadow 0.5s ease";
                
                // Full expansion
                els.halo.style.transform = "scale(2.2)"; 
                els.halo.style.borderColor = "var(--halo-blue-border)";
                els.halo.style.boxShadow = "0 0 40px var(--halo-blue-glow), inset 0 0 30px var(--halo-blue-glow)";
                
                // Add Blue Heartbeat Pulse at Expanded Size
                setTimeout(() => {
                    if (state.phase === PHASE_RECOVERY) {
                        els.halo.style.animation = "heartbeatBlueExpanded 1.5s ease-in-out infinite";
                    }
                }, 1500);

            }, 50);

            // Update Text
            els.topLabel.innerHTML = '<div class="simple-label">RECOVERY</div>';
            els.txtSub.innerText = "";

            setTimeout(() => {
                let rTimer = config.recover;
                els.txtMain.innerText = `${rTimer}s`;
                
                state.interval = setInterval(() => {
                    els.txtMain.innerText = `${rTimer}s`;
                    rTimer--;
                    if (rTimer < 0) finishRound();
                }, 1000);
            }, 1000);
        }

        function finishRound() {
            stopAllLogic();
            els.halo.style.animation = 'none'; 
            els.halo.style.transition = 'transform 2s ease, border-color 2s, box-shadow 2s';
            els.halo.style.transform = 'scale(1)';
            els.halo.style.borderColor = "var(--halo-gold-border)";
            els.halo.style.boxShadow = "0 0 40px var(--halo-gold-glow), inset 0 0 40px var(--halo-gold-glow)";

            els.topLabel.innerHTML = ""; // Clear top label
            els.txtMain.innerText = "Done";
            els.txtSub.innerText = "Relax";
            setTimeout(endSession, 3000);
        }

        // --- Helpers ---
        function skipStep() {
            stopAllLogic();
            if (state.phase === PHASE_BREATHING) {
                els.halo.removeEventListener('animationiteration', handleBreathIteration);
                startRetentionPhase();
            } else if (state.phase === PHASE_RETENTION) {
                startRecoveryPhase();
            } else if (state.phase === PHASE_RECOVERY) {
                finishRound();
            }
        }

        function stopAllLogic() {
            if (state.interval) clearInterval(state.interval);
            if (state.textTimeout) clearTimeout(state.textTimeout);
            els.halo.style.animation = 'none';
            els.halo.removeEventListener('animationiteration', handleBreathIteration);
        }

        function resetToIdle() {
            state.phase = PHASE_IDLE;
            
            els.halo.style.transform = 'scale(1)';
            els.halo.style.borderColor = "var(--halo-gold-border)";
            els.halo.style.boxShadow = "0 0 40px var(--halo-gold-glow), inset 0 0 40px var(--halo-gold-glow)";
            els.halo.style.transition = 'none';
            setRedOverlay(0, "0s");
            
            els.controls.classList.remove('active');
            els.btnExtend.classList.remove('visible');
            els.topLabel.classList.remove('active');
            
            els.txtMain.innerText = "START";
            els.txtSub.innerText = "Tap Ring";
        }

        function formatTime(s) {
            if (s < 0) return "0:00";
            const min = Math.floor(s / 60);
            const sec = s % 60;
            return `${min}:${sec < 10 ? '0'+sec : sec}`;
        }

        function logHistory(val) {
             const now = new Date();
             const ts = now.getHours() + ":" + (now.getMinutes()<10?'0':'') + now.getMinutes();
             state.history.unshift({ time: ts, dur: "Round" });
        }

        function renderHistory() {
            const container = els.historyLog;
            container.innerHTML = "";
            state.history.forEach(h => {
                const div = document.createElement('div');
                div.innerText = `${h.time} - Complete`;
                div.style.padding = "4px 0";
                div.style.borderBottom = "1px solid rgba(255,255,255,0.05)";
                container.appendChild(div);
            });
        }
    </script>
</body>
</html>
